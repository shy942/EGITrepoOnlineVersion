/Users/user/eclipse.platform.ui/bundles/org.eclipse.jface/src/org/eclipse/jface/resource/ResourceManager.java
org eclipse jface resource java util array list java util list org eclipse core runtime assert org eclipse core runtime status org eclipse core runtime status org eclipse jface util policy org eclipse swt exception org eclipse swt graphics color org eclipse swt graphics device org eclipse swt graphics font org eclipse swt graphics image org eclipse swt graphics this manages resources manages reference counted instances resources fonts images colors accessed descriptors everything allocated registry disposed registry since resources shared reference counted disposed resource manager handles correct allocation disposal resources differs face registry classes map symbolic resources general registry map descriptors resource manager convert descriptors real images fonts resource manager list runnables scheduled resource manager disposed null empty list runnable dispose execs null returns device resource manager create resources device resource manager device device returns resource descriptor resource exists reference count incremented exiting resource returned otherwise resource allocated every call method call link destroy device resource descriptor resource intended live entire lifetime resource manager subsequent call link destroy device resource descriptor resource cleaned resource manager disposed this pattern lived link local resource manager global resource manager effectively leaks resource resources returned method reference counted shared internally resource managers they disposed resource manager framework exceptions code shares for call link org eclipse swt graphics resource dispose returned method callers safely downcast result resource type descriptor for image descriptor method image param descriptor descriptor resource allocate newly allocated resource null device resource exception unable allocate resource object create device resource descriptor descriptor deallocates resource allocated link create device resource descriptor descriptors compared equality identity resource created multiple times decrement reference count disposing actual resource param descriptor identifier resource destroy device resource descriptor descriptor returns allocated resource allocates exists resource remain allocated lifetime resource manager resource deallocated automatically resource manager disposed resources returned method reference counted shared internally resource managers they disposed resource manager framework exceptions code shares for call link org eclipse swt graphics resource dispose returned method callers safely downcast result resource type descriptor for image descriptor method downcast image this method resources remain allocated lifetime resource manager allocate shorter lived resources manage code create code code destroy code method this method called global resource manager resources remain allocated lifetime app effectively leaked param descriptor identifier requested resource requested resource never null device resource exception resource exist created reason object device resource descriptor descriptor object result find descriptor result null result create descriptor result creates image image descriptor images allocated manner disposed link destroy image image descriptor calling link image dispose image intended remain allocated lifetime resource manager call destroy image image cleaned automatically resource manager disposed this lived resource managers global manager effectively leaks resource param descriptor descriptor image create image descriptor shared equivalent image descriptors device resource exception unable allocate image image create image image descriptor descriptor assertion diagnose client bugs see bug bug assert not null descriptor image create descriptor creates image image descriptor images allocated manner disposed link destroy image image descriptor calling link image dispose param descriptor descriptor image create image descriptor shared equivalent image descriptors image create image with default image descriptor descriptor descriptor null default image image create descriptor device resource exception policy log log status status org eclipse jface image loaded descriptor default image exception policy log log status status org eclipse jface image loaded descriptor default image returns image returned event intended image missing image returned event intended image missing image default image undoes link create image image descriptor param descriptor identifier image dispose destroy image image descriptor descriptor destroy descriptor allocates color color descriptor any color allocated manner disposed calling link destroy color color descriptor eventual call link dispose link color dispose called returned color param descriptor descriptor color create color color descriptor null device resource exception unable create color color create color color descriptor descriptor color create descriptor allocates color any color allocated manner disposed calling link destroy color eventual call link dispose link color dispose called returned color param descriptor descriptor color create color color descriptor null device resource exception unable create color color create color descriptor create color color descriptor descriptor undoes call link create color param descriptor color dispose destroy color descriptor destroy color color descriptor descriptor undoes call link create color color descriptor param descriptor identifier color dispose destroy color color descriptor descriptor destroy descriptor returns font font descriptor any font allocated manner deallocated calling dispose font eventual call link dispose method link font dispose called returned font param descriptor description font create font descriptor device resource exception unable create font font create font font descriptor descriptor font create descriptor undoes previous call link create font font descriptor param descriptor description font destroy destroy font font descriptor descriptor destroy descriptor disposes remaining resources allocated manager dispose dispose execs null runnables exception propagate however prevent remaining runnables notified runnables exception remember method runtime exception exception null runnable execs dispose execs array runnable dispose execs size execs length runnable exec execs exec runtime exception exception exception null runnables threw exception propagate exception returns allocated resource descriptor null exists param descriptor descriptor find allocated resource descriptor null object find device resource descriptor descriptor causes code code method runnable invoked receiver disposed runnable subsequently canceled call code cancel dispose exec code param runnable execute dispose exec runnable assert not null dispose execs null dispose execs array list dispose execs add cancels runnable scheduled code dispose exec code has runnable registered dispose exec param runnable cancel cancel dispose exec runnable assert not null dispose execs null dispose execs remove dispose execs empty dispose execs null