/Users/user/eclipse.platform.ui/tests/org.eclipse.ui.monitoring.tests/src/org/eclipse/ui/internal/monitoring/EventLoopMonitorThreadTests.java
org eclipse internal monitoring org junit assert equals org junit assert not null org junit assert true java util list org eclipse jface preference preference store org eclipse swt org eclipse swt widgets event org eclipse internal monitoring event loop monitor thread parameters org eclipse monitoring preference constants org eclipse monitoring stack sample org eclipse monitoring freeze event org junit after org junit before org junit test tests link event loop monitor thread event loop monitor thread tests all time values milliseconds minutes string org eclipse swt internal gtk gtk dialog org eclipse workbench addons dndaddon manager start drag string java sun org eclipse core internal jobs worker pool sleep org eclipse core internal jobs worker pool start job org eclipse core internal jobs worker mock event loop monitor thread unit tests mock event loop monitor thread event loop monitor thread mock event loop monitor thread parameters args exception args overridden provide artificial time scale testing override timestamp timestamp replaces implementation this breaks implicit contract amount time passed sleep for millis called argument testing environment unit tests complete control elapsed time tests deterministic override sleep for millis nanoseconds sleep lock num sleeps sleep lock notify all mock event loop monitor thread monitoring thread mock freeze event logger logger list freeze event logged events object sleep lock num sleeps timestamp before set preferences set value preference constants false logger mock freeze event logger logged events logger logged events sleep lock object num sleeps timestamp after tear down exception monitoring thread null shutdown monitoring thread monitoring thread null logged events clear preferences set default preference constants preference store preferences monitoring plugin default preference store creates returns event loop monitor thread fakes timer management enable testing freeze event scenarios mock event loop monitor thread create test thread threshold exception event loop monitor thread parameters args parameters args event warning threshold threshold args event error threshold threshold args max stack samples args deadlock threshold args thread filter args noninteresting thread filter mock event loop monitor thread args shuts event monitoring thread shutdown monitoring thread exception send event post external event dispatch send event post event monitoring thread shutdown monitoring thread join runs current thread amount time delays for cycles num cycles exception for time num cycles runs current thread amount time milliseconds for time millis exception sleep lock millis math min millis timestamp sleeps num sleeps time system current time millis sleep lock wait sleeps num sleeps time system current time millis millis returns expected number stack traces captured expected stack count running time math min running time send event event type event event event event type event type monitoring thread handle event event returns relative times stack samples text form string stack samples timeline freeze event event string builder buf string builder stack sample sample event stack trace samples buf length buf append buf append sample timestamp event start timestamp buf string test test stack decimation exception monitoring thread create test thread monitoring thread start send event pre event cycle events sleep lock send event pre event for cycles send event post event test count count decimated event length sleep lock send event pre event for cycles event length send event post event for cycles freeze event event logged events not null freeze event automatically published event equals decimation resize stack trace array properly event stack trace samples length decimation slows sampling rate factor test resampling reduction event length sleep lock send event pre event for cycles event length send event post event for cycles event logged events not null freeze event automatically published event equals decimation reset sampiling rate properly event stack trace samples length test resampling reduction decimations event length sleep lock send event pre event for cycles event length send event post event for cycles event logged events not null freeze event automatically published event equals decimation reset sampiling rate properly event stack trace samples length test test publish possible deadlock exception monitoring thread create test thread monitoring thread start max deadlock send event pre event sleep lock cycle events monitoring event thread running send event pre event for cycles send event post event start time timestamp wait event propagate deadlock tracker for cycles remaining max deadlock timestamp start time for time remaining true deadlock logged time logged events empty march time trigger deadlock logging for cycles equals incorrect number events logged logged events size freeze event event logged events true possible deadlock logging valid number stack traces event stack trace samples length extending freeze shouldn log events for time max deadlock for cycles equals deadlock events logged logged events size test test publish deadlocks when sleeping exception monitoring thread create test thread monitoring thread start send event pre event sleep lock cycle events monitoring event thread running send event pre event for cycles send event post event send event pre external event dispatch wait event propagate deadlock tracker for time for cycles true deadlock events logged logged events empty test test logging for sleep exception freeze duration factor monitoring thread create test thread monitoring thread start one level deep sleep lock send event pre external event dispatch for time freeze duration factor send event post external event dispatch for cycles true sleeping trigger freeze event logged events empty test test event logging exception freeze duration factor monitoring thread create test thread monitoring thread start event start time freeze duration one level deep sleep lock level send event pre event event start time timestamp for time freeze duration factor freeze duration timestamp event start time send event post event for cycles equals incorrect number freeze events logged logged events size freeze event event logged events equals freeze event log incorrect start time event start time event start timestamp equals freeze event duration incorrect freeze duration event total duration equals freeze event didn capture good range stack samples stack samples timeline event expected stack count freeze duration event stack trace samples length test test nested event logging exception freeze duration factor monitoring thread create test thread monitoring thread start event start time freeze duration two levels deep sleep lock level send event pre event for cycles level send event pre event event start time timestamp for time freeze duration factor freeze duration timestamp event start time send event post event send event post event for cycles equals incorrect number freeze events logged logged events size freeze event event logged events equals freeze event log incorrect start time event start time event start timestamp equals freeze event duration incorrect freeze duration event total duration equals freeze event didn capture good range stack samples stack samples timeline event expected stack count freeze duration event stack trace samples length test test doubly nested event logging exception freeze duration factor monitoring thread create test thread monitoring thread start event start time freeze duration three levels deep sleep lock level send event pre event for cycles level send event pre event for cycles level send event pre event event start time timestamp for time freeze duration factor freeze duration timestamp event start time send event post event send event post event send event post event for cycles equals incorrect number freeze events logged logged events size freeze event event logged events equals freeze event log incorrect start time event start time event start timestamp equals freeze event duration incorrect freeze duration event total duration equals freeze event didn capture good range stack samples stack samples timeline event expected stack count freeze duration event stack trace samples length test test see long event continuation after nested call exception freeze duration factor monitoring thread create test thread monitoring thread start event resume time freeze duration event validate freeze event logged sleep lock send event pre event initially outer thread invoking nested events responsive for cycles send event pre event send event post event event resume time timestamp for time freeze duration factor send event post event freeze duration timestamp event resume time for cycles equals incorrect number freeze events logged logged events size freeze event event logged events equals freeze event didn start nested point event resume time event start timestamp equals freeze event duration incorrect freeze duration event total duration equals freeze event didn capture good range stack samples stack samples timeline event expected stack count freeze duration event stack trace samples length test test see long event middle nested calls exception freeze duration factor monitoring thread create test thread monitoring thread start event resume time freeze duration event validate freeze event logged sleep lock send event pre event initially outer thread invoking nested events responsive for cycles send event pre event send event post event this nested event freeze event resume time timestamp for time freeze duration factor freeze duration timestamp event resume time before exiting outer thread invoking nested events responsive send event pre event send event post event for cycles send event post event for cycles equals incorrect number freeze events logged logged events size freeze event event logged events equals freeze event didn start nested point event resume time event start timestamp equals freeze event duration incorrect freeze duration event total duration equals freeze event didn capture good range stack samples stack samples timeline event expected stack count freeze duration event stack trace samples length test test see sleep middle nested calls exception freeze duration factor monitoring thread create test thread monitoring thread start event validate freeze event logged sleep lock send event pre event initially outer thread invoking nested events responsive for cycles send event pre event send event post event nested events freeze duration factor for cycles send event pre external event dispatch send event post external event dispatch before exiting outer thread invoking nested events responsive send event pre event send event post event for cycles send event post event for cycles true freeze event published external event dispatch logged events empty test test consecutive sleeps exception freeze duration factor monitoring thread create test thread monitoring thread start event start time event duration sleep lock send event pre event send event pre external event dispatch for time send event post external event dispatch event start time timestamp for cycles true freeze event shold published external event dispatch logged events empty pre external event dispatch sleep lock for time freeze duration factor event duration timestamp event start time send event pre external event dispatch send event post external event dispatch send event post event for cycles equals incorrect number freeze events logged logged events size freeze event event logged events equals freeze event log incorrect start time event start time event start timestamp equals freeze event duration incorrect event duration event total duration