/Users/user/eclipse.platform.ui/bundles/org.eclipse.jface/src/org/eclipse/jface/resource/AbstractResourceManager.java
org eclipse jface resource java util collection java util hash map java util iterator java util map entry abstract implementation resource manager maintains reference counts allocated resources delegates method allocate time resource referenced delegates method deallocate time reference removed abstract resource manager resource manager map resource descriptor ref count null empty hash map device resource descriptor ref count map null holds reference count allocated resource ref count object resource count ref count object resource resource resource called time resource requested should allocate resource correct type param descriptor identifier resource allocate newly allocated resource device resource exception thrown allocation device resource fails object allocate device resource descriptor descriptor device resource exception called time resource dereferenced should release resources reserved allocate param resource resource deallocated param descriptor identifier resource deallocate object resource device resource descriptor descriptor override object create device resource descriptor descriptor device resource exception lazily allocate map map null map hash map get current reference count ref count count map descriptor count null resource exists increment reference count existing resource count count count resource allocate resource count object resource allocate descriptor count ref count resource map descriptor count resource override destroy device resource descriptor descriptor map empty null resources dispose map null find existing resource ref count count map descriptor count null resource exists decrement reference count count count count count reference deallocate deallocate count resource descriptor map remove descriptor null map empty save small amount memory map empty map null deallocates resources allocated registry deallocated override dispose dispose map null collection entry device resource descriptor ref count entries map entry set iterator entry device resource descriptor ref count iter entries iterator iter next entry device resource descriptor ref count iter object key key ref count val value deallocate val resource device resource descriptor key map null override object find device resource descriptor descriptor map null null ref count count map descriptor count null null count resource