/Users/user/eclipse.platform.ui/tests/org.eclipse.ui.tests.harness/src/org/eclipse/ui/tests/harness/util/DisplayWaiter.java
org eclipse tests harness util java util logging level java util logging logger junit framework assert org eclipse swt widgets display implements thread wait timeout wake display wait thread restarted stopped timed display waiter timeout display waiter thread timeout timeout state false returns code true code timeout reached code false code code true code timeout reached code false code timed out mutex timeout state set timed out timed out timeout state timed out timeout initial state timeout state initial state configuration display display object mutex object keep running timeout state transitions current state time milliseconds date timeout occur next timeout thread thread current thread timeout current thread timeout current timeout state creates instance display timeout param display display event loop display waiter display display display false creates instance display timeout param display display event loop param running code true code thread running timing display waiter display display running assert not null display display display state keep running timeout running starts timeout thread running nothing thread running param delay delay milliseconds timeout queried timed status timeout start delay assert true delay mutex state start thread set next timeout delay unhold set next timeout delay current timeout state sets timeout current time code delay code param delay delay timeout occurs milliseconds set next timeout delay current time millis system current time millis current time millis delay current time millis next timeout next timeout long starts thread running resets timeout param delay delay milliseconds timeout queried timed status timeout restart delay assert true delay mutex state start thread unhold set next timeout delay current timeout state stops thread running another thread started calling link start link restart mutex transition mutex notify all puts reaper thread hold restarted calling link start link restart hold mutex thread transition mutex notify all transition code code clear timed flag assume current code code unhold checked transition current timeout state timeout false mutex notify all start thread assume current code code start thread checked transition current timeout state timeout false current thread thread exception thrown thread notices stopped thread started thread changed exception exception serial version java lang runnable override interrupted exception logger global log level thread changed exception logger global log level mutex mutex notify all runs thread interrupted exception thread interrupted thread changed exception thread changed interrupted exception thread changed exception mutex check thread wait potential change hold states state wait potential change wait for timeout state change timed out states wait potential change hold states states check current thread thread exception thread changed exception current thread changed check thread thread changed exception current thread thread changed exception waits timeout occurs interrupted exception thread interrupted thread changed exception thread changed wait for timeout interrupted exception thread changed exception delta state delta next timeout system current time millis wait order avoid timing display sleep delta math max delta logger global finest sleeping delta mutex wait delta check thread sets timed flag wakes display transitions code code running mode code code timed out logger global finer timed current timeout state set timed out true wake call display wake keep running timeout checked transition checked transition waits code code returns code code calling method code code code code method returns interrupted exception thread interrupted thread changed exception thread changed hold hold interrupted exception thread changed exception state mutex wait check thread states current thread start transitions code state code current code states code returns code true code transition happened code false code param states trigger transition param state transition code true code transition happened code false code transition states state state states logger global finer state state states state state true logger global finest transition state state states false checks code states code assertion met transitions code state code param states allowed param state transition checked transition states state states states logger global finer state state state state implements consistency checking param allowed junit framework assertion failed error current code code states assert true illegal state answers code true code current code code param code true code current code false code state state state pretty print param string representation string string buffer buf string buffer comma false buf append comma true comma buf append buf append comma true comma buf append buf append buf string