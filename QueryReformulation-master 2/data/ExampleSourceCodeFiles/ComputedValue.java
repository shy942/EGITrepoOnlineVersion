/Users/user/eclipse.platform.ui/bundles/org.eclipse.core.databinding.observable/src/org/eclipse/core/databinding/observable/value/ComputedValue.java
org eclipse core databinding observable java util function supplier org eclipse core databinding observable change event org eclipse core databinding observable change listener org eclipse core databinding observable observable org eclipse core databinding observable stale listener org eclipse core databinding observable observable tracker org eclipse core databinding observable realm org eclipse core databinding observable stale event org eclipse core databinding observable list observable list lazily calculated automatically computes registers listeners dependencies dependencies link observable objects any change observable dependencies recomputed this thread safe all accessing methods invoked link realm current current realm methods adding removing listeners invoked thread example compute sum elements link observable list link integer pre observable list addends writable value value type integer addends add integer addends add integer addends add integer observable value sum computed value object calculate sum iterator addends iterator next integer addend integer sum addend value sum system println sum value addends add integer system println sum value pre param type observed computed value abstract observable value dirty true stale false cached value null array observables computed depends this field code null code listening observable dependencies null factory method create link computed value objects easy manner example observing size link observable list pre observable value integer list size observable computed value create observable list size pre param supplier link supplier link supplier method tracked getter see link observable tracker getter called observable details link computed value computed link supplier observable value create supplier supplier computed value override calculate supplier computed value realm default null param type code null code computed value object type realm default type param realm computed value realm realm realm null param realm param type computed value realm realm object type realm type type inner interfaces don expose each implemented separate anonymous combine reduce memory overhead number classes runnable calls compute value stores result cached value change listener stores observable dependencies list this registered listener calling observable tracker detect observable compute value change listener attached dependency private interface runnable change listener stale listener override cached value calculate override handle stale stale event event dirty stale stale true fire stale override handle change change event event dirty private interface interface private interface object type override get value dirty this run calculate method while add observable touched dependencies list observable dependencies observable tracker and monitor interface interface null stale false dependencies length observable observable dependencies add change listener dependency observable stale stale true observable add stale listener interface dependencies dependencies dirty false cached value subclasses override method provide object any dependencies calculate link observable implementers methods tagged tracked getter computed value recognize dependency object calculate dirty dirty dirty true listening copy value cached value fire dirty event this implementation recomputes lazily fire value change value diff override old value value override new value value listening stop listening dependency dependencies null dependencies length observable observable dependencies observable remove change listener interface observable remove stale listener interface dependencies null override stale recompute staleness wouldn value stale override object value type type method exists call runnable override listeners listeners override add change listener change listener listener add change listener listener listening attach listeners compute value for listeners some clients add listener expect notified called value call value need careful realms method called realm see bug client calls realm receive change notifications runnable executed job figure notifications compute value for listeners realm exec runnable override dependencies null listening listeners but listening call value start listening observables depend value override add value change listener value change listener listener add value change listener listener listening attach listeners compute value for listeners override dispose dispose listening